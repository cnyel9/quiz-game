&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;link
    rel=&quot;icon&quot;
    href=&quot;data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;üé≤&lt;/text&gt;&lt;/svg&gt;&quot;
  /&gt;
    &lt;title&gt;Hasil Quiz - Seru Tapi Miskin&lt;/title&gt;
    &lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body
    class=&quot;bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 min-h-screen flex items-center justify-center&quot;
  &gt;
    &lt;nav
      class=&quot;fixed top-0 left-0 right-0 z-50 bg-white/20 backdrop-blur-md shadow-lg&quot;
    &gt;
      &lt;div
        class=&quot;container mx-auto px-4 py-3 flex justify-between items-center&quot;
      &gt;
        &lt;div class=&quot;flex items-center space-x-4&quot;&gt;
          &lt;a
            href=&quot;index.html&quot;
            class=&quot;text-2xl font-bold text-white drop-shadow-lg hover:text-purple-200 transition-colors duration-300&quot;
          &gt;
            Seru Tapi Miskin
          &lt;/a&gt;
        &lt;/div&gt;

        &lt;div class=&quot;flex items-center space-x-6&quot;&gt;
          &lt;div class=&quot;hidden md:flex space-x-4&quot;&gt;
            &lt;a
              href=&quot;quiz.html&quot;
              class=&quot;text-white hover:text-purple-200 transition-colors duration-300 flex items-center space-x-2&quot;
            &gt;
              &lt;svg
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                class=&quot;h-5 w-5&quot;
                fill=&quot;none&quot;
                viewBox=&quot;0 0 24 24&quot;
                stroke=&quot;currentColor&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth=&quot;{2}&quot;
                  d=&quot;M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                /&gt;
              &lt;/svg&gt;
              &lt;span&gt;Quiz&lt;/span&gt;
            &lt;/a&gt;
            &lt;a
              href=&quot;leaderboard.html&quot;
              class=&quot;text-white hover:text-purple-200 transition-colors duration-300 flex items-center space-x-2&quot;
            &gt;
              &lt;svg
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                class=&quot;h-5 w-5&quot;
                fill=&quot;none&quot;
                viewBox=&quot;0 0 24 24&quot;
                stroke=&quot;currentColor&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth=&quot;{2}&quot;
                  d=&quot;M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z&quot;
                /&gt;
              &lt;/svg&gt;
              &lt;span&gt;Peringkat&lt;/span&gt;
            &lt;/a&gt;
          &lt;/div&gt;

          &lt;div class=&quot;flex items-center space-x-4&quot;&gt;
            &lt;a
              href=&quot;profile.html&quot;
              class=&quot;text-white hover:text-purple-200 transition-all duration-300 transform hover:scale-110&quot;
            &gt;
              &lt;svg
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                class=&quot;h-6 w-6&quot;
                fill=&quot;none&quot;
                viewBox=&quot;0 0 24 24&quot;
                stroke=&quot;currentColor&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth=&quot;{2}&quot;
                  d=&quot;M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/a&gt;
            &lt;button
              onclick=&quot;logout()&quot;
              class=&quot;text-white hover:text-red-300 transition-all duration-300 transform hover:scale-110&quot;
            &gt;
              &lt;svg
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                class=&quot;h-6 w-6&quot;
                fill=&quot;none&quot;
                viewBox=&quot;0 0 24 24&quot;
                stroke=&quot;currentColor&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth=&quot;{2}&quot;
                  d=&quot;M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/nav&gt;
    &lt;div
      class=&quot;pt-20 bg-white p-8 rounded-xl shadow-2xl max-w-md w-full text-center&quot;
    &gt;
    &lt;div class=&quot;pt-20 bg-white p-8 rounded-xl shadow-2xl max-w-md w-full text-center&quot;&gt;
      &lt;h1 class=&quot;text-3xl font-bold mb-4 text-purple-600&quot;&gt;Seru Tapi Miskin&lt;/h1&gt;
  
      &lt;div id=&quot;result-section&quot; class=&quot;space-y-6&quot;&gt;
          &lt;div class=&quot;bg-purple-100 p-6 rounded-lg&quot;&gt;
              &lt;h2 class=&quot;text-2xl font-semibold text-purple-700&quot;&gt;Skormu&lt;/h2&gt;
              &lt;p id=&quot;final-score&quot; class=&quot;text-5xl font-bold text-purple-800 mt-2&quot;&gt;&lt;/p&gt;
          &lt;/div&gt;
  
          &lt;div id=&quot;result-message&quot; class=&quot;text-lg text-gray-700 mt-4 text-center&quot;&gt;&lt;/div&gt;
  
          &lt;div class=&quot;space-y-4&quot;&gt;
              &lt;button
                  onclick=&quot;shareResult()&quot;
                  class=&quot;w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-lg hover:scale-105 transform transition&quot;
              &gt;
                  Bagikan Hasilmu
              &lt;/button&gt;
              &lt;button
                  onclick=&quot;window.location.href=&#39;index.html&#39;&quot;
                  class=&quot;w-full bg-gray-200 text-purple-600 py-3 rounded-lg hover:bg-gray-300&quot;
              &gt;
                  Kembali ke Beranda
              &lt;/button&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;

  &lt;script&gt;
    document.addEventListener(&quot;DOMContentLoaded&quot;, async () =&gt; {
        const urlParams = new URLSearchParams(window.location.search);
        const score = parseInt(urlParams.get(&quot;score&quot;));
        const totalQuestions = parseInt(urlParams.get(&quot;totalQuestions&quot;));
        const totalScore = parseInt(urlParams.get(&quot;totalScore&quot;));

        document.getElementById(&quot;final-score&quot;).innerText = `${score} / ${totalQuestions}`;

        // Pesan berdasarkan skor
        const resultMessage = document.getElementById(&quot;result-message&quot;);
        if (score === totalQuestions) {
            resultMessage.innerHTML = `
                &lt;p class=&quot;text-green-600 font-bold&quot;&gt;üèÜ Sempurna! Kamu Jenius!&lt;/p&gt;
                &lt;p class=&quot;text-sm text-gray-600 mt-2&quot;&gt;Kerja keras membayar!&lt;/p&gt;
            `;
        } else if (score &gt; 0) {
            resultMessage.innerHTML = `
                &lt;p class=&quot;text-yellow-600 font-bold&quot;&gt;üëç Lumayan! Masih Bisa Diperbaiki&lt;/p&gt;
                &lt;p class=&quot;text-sm text-gray-600 mt-2&quot;&gt;Terus belajar ya!&lt;/p&gt;
            `;
        } else {
            resultMessage.innerHTML = `
                &lt;p class=&quot;text-red-600 font-bold&quot;&gt;üòÖ Waduh, Masih Kurang Nih&lt;/p&gt;
                &lt;p class=&quot;text-sm text-gray-600 mt-2&quot;&gt;Jangan menyerah!&lt;/p&gt;
            `;
        }

        // Simpan skor ke leaderboard
        await saveScoreToLeaderboard(score, totalQuestions, totalScore);
    });

    // Fungsi untuk menyimpan skor ke leaderboard
    async function saveScoreToLeaderboard(score, totalQuestions, totalScore) {
    try {
        // Ambil username dari local storage
        const username = await localforage.getItem(&quot;username&quot;);

        // Ambil foto profil dari local storage
        const profileImage = await localforage.getItem(&quot;profileImage&quot;) || 
            &#39;https://via.placeholder.com/50?text=Profil&#39;;

        // Ambil leaderboard yang sudah ada
        let leaderboard = (await localforage.getItem(&quot;leaderboard&quot;)) || [];

        // Tambahkan entri baru
        leaderboard.push({
            name: username || &quot;Pemain Misterius&quot;,
            score: score,
            totalQuestions: totalQuestions,
            totalScore: totalScore,
            date: new Date().toLocaleDateString(),
            profileImage: profileImage
        });

        // Urutkan dari skor tertinggi
        leaderboard.sort((a, b) =&gt; b.totalScore - a.totalScore);

        // Batasi 10 skor teratas
        leaderboard = leaderboard.slice(0, 10);

        // Simpan kembali
        await localforage.setItem(&quot;leaderboard&quot;, leaderboard);
    } catch (error) {
        console.error(&quot;Gagal menyimpan skor&quot;, error);
    }
}

    // Fungsi share
    function shareResult() {
        const urlParams = new URLSearchParams(window.location.search);
        const score = parseInt(urlParams.get(&quot;score&quot;));
        const totalQuestions = parseInt(urlParams.get(&quot;totalQuestions&quot;));
        
        const username = localStorage.getItem(&quot;username&quot;);
        const shareText = `${username} dapat skor ${score}/${totalQuestions} di quiz &quot;Seru Tapi Miskin&quot;! Cobain juga guys! ü§ì`;

        if (navigator.share) {
            navigator.share({
                title: &quot;Hasil Quizku&quot;,
                text: shareText,
            }).catch(console.error);
        } else {
            // Fallback untuk browser yang tidak support Web Share API
            alert(shareText);
        }
    }

    // Untuk logout
    function logout() {
        localforage.removeItem(&quot;username&quot;).then(() =&gt; {
            window.location.href = &quot;index.html&quot;;
        });
    }
&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
